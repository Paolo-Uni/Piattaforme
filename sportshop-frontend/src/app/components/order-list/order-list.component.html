<div class="container mt-4">
  <h2>I miei Ordini</h2>
  <div class="accordion" id="ordersAccordion">
    <div class="accordion-item" *ngFor="let order of orders">
      <h2 class="accordion-header">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" [attr.data-bs-target]="'#order'+order.idOrdine">
          Ordine #{{ order.idOrdine }} - {{ order.data | date:'medium' }} -
          <span class="badge ms-2" [ngClass]="{'bg-success': order.stato === 'PAGAMENTO_COMPLETATO', 'bg-danger': order.stato === 'ANNULLATO', 'bg-warning': order.stato === 'IN_ATTESA_DI_PAGAMENTO'}">
            {{ order.stato }}
          </span>
          <span class="ms-auto fw-bold">€ {{ order.totaleOrdine | number:'1.2-2' }}</span>
        </button>
      </h2>
      <div [id]="'order'+order.idOrdine" class="accordion-collapse collapse" data-bs-parent="#ordersAccordion">
        <div class="accordion-body">
          <p><strong>Spedito a:</strong> {{ order.indirizzoSpedizione }}</p>
          <ul class="list-group">
            <li class="list-group-item d-flex justify-content-between align-items-center" *ngFor="let item of order.oggetti">
              {{ item.nome }} ({{ item.taglia }}, {{ item.colore }})
              <span>{{ item.quantita }} x € {{ item.prezzo }}</span>
            </li>
          </ul>
          <div class="mt-3 text-end" *ngIf="order.stato !== 'ANNULLATO' && order.stato !== 'SPEDITO'">
            <button class="btn btn-danger btn-sm" (click)="cancel(order.idOrdine)">Annulla Ordine</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
