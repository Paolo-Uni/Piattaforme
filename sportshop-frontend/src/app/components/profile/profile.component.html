<div class="container mt-5">
  <div class="card shadow-sm">
    <div class="card-header bg-primary text-white">
      <h3>Il Mio Profilo</h3>
    </div>
    <div class="card-body" *ngIf="user">

      <div *ngIf="message" class="alert alert-info">{{ message }}</div>

      <div *ngIf="!isEditing">
        <p><strong>Nome:</strong> {{ user.nome }}</p>
        <p><strong>Cognome:</strong> {{ user.cognome }}</p>
        <p><strong>Email:</strong> {{ user.email }}</p>
        <p><strong>Telefono:</strong> {{ user.telefono || 'Non specificato' }}</p>
        <p><strong>Indirizzo Predefinito:</strong> {{ user.indirizzo || 'Non specificato' }}</p>

        <button class="btn btn-warning me-2" (click)="toggleEdit()">Modifica Dati</button>
        <button class="btn btn-danger" (click)="logout()">Logout</button>
      </div>

      <div *ngIf="isEditing">
        <form (ngSubmit)="saveProfile()">
          <div class="mb-3">
            <label class="form-label">Nome</label>
            <input type="text" class="form-control" [(ngModel)]="editData.nome" name="nome" required>
          </div>
          <div class="mb-3">
            <label class="form-label">Cognome</label>
            <input type="text" class="form-control" [(ngModel)]="editData.cognome" name="cognome" required>
          </div>
          <div class="mb-3">
            <label class="form-label">Telefono</label>
            <input type="text" class="form-control" [(ngModel)]="editData.telefono" name="telefono">
          </div>
          <div class="mb-3">
            <label class="form-label">Indirizzo</label>
            <textarea class="form-control" [(ngModel)]="editData.indirizzo" name="indirizzo" rows="2"></textarea>
          </div>

          <button type="submit" class="btn btn-success me-2">Salva</button>
          <button type="button" class="btn btn-secondary" (click)="toggleEdit()">Annulla</button>
        </form>
      </div>

    </div>
  </div>
</div>
